var Bermuda,__slice=[].slice;Bermuda=function(){function t(t,e){this.elem=t,null==e&&(e={}),this.settings=r(n,e),this.map=this.initMap(),this.icon=this.initIcon()}var n,e,o,r,i,s;return n={autoCenter:!0,marker:{},polygon:{},icon:{},map:{},onChange:function(){}},t.prototype.markers=[],r=function(){var t,n,e,o,r,i,s;for(o=1<=arguments.length?__slice.call(arguments,0):[],t={},i=0,s=o.length;s>i;i++){e=o[i];for(n in e)r=e[n],t[n]=r}return t},t.prototype.initMap=function(){return new google.maps.Map(this.elem,this.settings.map)},t.prototype.initIcon=function(){var t;if(!e(this.settings.icon))return t=new google.maps.Size(this.settings.icon.width,this.settings.icon.height),new google.maps.MarkerImage(this.settings.icon.image,null,null,null,t)},e=function(t){return 0===Object.keys(t).length},t.prototype.draw=function(t){return this.addMarkers(t),this.settings.autoCenter&&this.autoCenter(),this.initPolygon()},t.prototype.addMarkers=function(t){var n,e,r,i,a,u;for(a=s(t),u=[],r=0,i=a.length;i>r;r++)n=a[r],e=this.createMarker(n),o(e,"dragend",function(t){return function(){return t.settings.onChange(t.markerCoordinates())}}(this)),u.push(this.markers.push(e));return u},s=function(t){var n,e,o,r;for(r=[],e=0,o=t.length;o>e;e++)n=t[e],r.push(new google.maps.LatLng(n[0],n[1]));return r},t.prototype.createMarker=function(t){return new google.maps.Marker(r(this.settings.marker,{position:t,map:this.map,draggable:!0,icon:this.icon}))},t.prototype.autoCenter=function(){var t,n,e,o,r;for(t=new google.maps.LatLngBounds,r=this.markerPositions(),e=0,o=r.length;o>e;e++)n=r[e],t.extend(n);return this.map.fitBounds(t)},o=function(t,n,e){return google.maps.event.addListener(t,n,e)},t.prototype.initPolygon=function(){var t,n,e,r,s,a;for(n=this.createPolygon(),s=this.markers,a=[],e=0,r=s.length;r>e;e++)t=s[e],a.push(o(t,"drag",function(t){return function(){var e;return e=n,n=t.createPolygon(),i(e)}}(this)));return a},t.prototype.markerPositions=function(){var t,n,e,o,r;for(o=this.markers,r=[],n=0,e=o.length;e>n;n++)t=o[n],r.push(t.position);return r},t.prototype.markerCoordinates=function(){var t,n,e,o,r;for(o=this.markers,r=[],n=0,e=o.length;e>n;n++)t=o[n],r.push([t.position.lat(),t.position.lng()]);return r},i=function(t){return t.setMap(null)},t.prototype.createPolygon=function(){return new google.maps.Polygon(r(this.settings.polygon,{map:this.map,paths:this.markerPositions(),draggable:!1,geodesic:!0}))},t.prototype.zoomIn=function(){return this.map.setZoom(this.map.zoom+1)},t.prototype.zoomOut=function(){return this.map.setZoom(this.map.zoom-1)},t}();