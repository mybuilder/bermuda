var Bermuda,__bind=function(t,n){return function(){return t.apply(n,arguments)}},__slice=[].slice;Bermuda=function(){function t(t,e){this.elem=t,null==e&&(e={}),this.redrawPolygon=__bind(this.redrawPolygon,this),this.settings=o(n,e),this.initMap(),this.initIcon()}var n,e,o,r,i;return n={disabled:!1,autoCentered:!0,marker:{},polygon:{},icon:{},map:{},onChange:function(){}},t.prototype.markers=[],t.prototype.polygon=null,t.prototype.icon=null,o=function(){var t,n,e,o,r,i,s;for(o=1<=arguments.length?__slice.call(arguments,0):[],t={},i=0,s=o.length;s>i;i++){e=o[i];for(n in e)r=e[n],t[n]=r}return t},t.prototype.initMap=function(){return this.map=new google.maps.Map(this.elem,this.settings.map)},t.prototype.initIcon=function(){var t;if(!e(this.settings.icon))return t=new google.maps.Size(this.settings.icon.width,this.settings.icon.height),this.icon=new google.maps.MarkerImage(this.settings.icon.image,null,null,null,t)},e=function(t){return 0===Object.keys(t).length},t.prototype.clear=function(){return this.removeMarkers(),this.polygon?r(this.polygon):void 0},t.prototype.removeMarkers=function(){return this.detachMarkers(),this.markers=[]},t.prototype.detachMarkers=function(){var t,n,e,o,r;for(o=this.markers,r=[],n=0,e=o.length;e>n;n++)t=o[n],r.push(t.setMap(null));return r},t.prototype.disable=function(){return this.detachMarkers(),this.settings.disabled=!0},t.prototype.enable=function(){var t,n,e,o;for(o=this.markers,n=0,e=o.length;e>n;n++)t=o[n],t.setMap(this.map);return this.settings.disabled=!1},t.prototype.draw=function(t){return this.clear(),this.initMarkers(t),this.initPolygon()},t.prototype.initMarkers=function(t){var n,e,o,r;for(r=i(t),e=0,o=r.length;o>e;e++)n=r[e],this.markers.push(this.createMarker(n));return this.listen("dragend",function(t){return function(){return t.settings.onChange(t.getCoords())}}(this)),this.settings.autoCentered?this.autoCenter():void 0},i=function(t){var n,e,o,r;for(r=[],e=0,o=t.length;o>e;e++)n=t[e],r.push(new google.maps.LatLng(n[0],n[1]));return r},t.prototype.createMarker=function(t){var n;return n=new google.maps.Marker(o(this.settings.marker,{position:t,draggable:!0,icon:this.icon})),this.settings.disabled||n.setMap(this.map),n},t.prototype.autoCenter=function(){var t,n,e,o,r;for(t=new google.maps.LatLngBounds,r=this.getPositions(),e=0,o=r.length;o>e;e++)n=r[e],t.extend(n);return this.map.fitBounds(t)},t.prototype.listen=function(t,n){var e,o,r,i,s;for(i=this.markers,s=[],o=0,r=i.length;r>o;o++)e=i[o],s.push(google.maps.event.addListener(e,t,n));return s},t.prototype.initPolygon=function(){return this.drawPolygon(),this.listen("drag",this.redrawPolygon)},t.prototype.redrawPolygon=function(){var t;return t=this.polygon,this.drawPolygon(),r(t)},t.prototype.getPositions=function(){var t,n,e,o,r;for(o=this.markers,r=[],n=0,e=o.length;e>n;n++)t=o[n],r.push(t.position);return r},t.prototype.getCoords=function(){var t,n,e,o,r;for(o=this.markers,r=[],n=0,e=o.length;e>n;n++)t=o[n],r.push([t.position.lat(),t.position.lng()]);return r},r=function(t){return t.setMap(null)},t.prototype.drawPolygon=function(){return this.polygon=new google.maps.Polygon(o(this.settings.polygon,{map:this.map,paths:this.getPositions(),draggable:!1,geodesic:!0}))},t.prototype.zoomIn=function(){return this.map.setZoom(this.map.zoom+1)},t.prototype.zoomOut=function(){return this.map.setZoom(this.map.zoom-1)},t}();