var Bermuda,__slice=[].slice;Bermuda=function(){function n(n,e){this.elem=n,null==e&&(e={}),this.settings=r(t,e),this.icon=o(this.settings)}var t,e,r,o,i,a,u,s,g,l,c,p;return t={marker:{},polygon:{},icon:{},map:{}},n.prototype.changeCallback=function(){},r=function(n,t){var e,r,o,i;for(o in t){e=t[o];for(r in e)i=e[r],n[o][r]=i}return n},o=function(n){var t;return i(n.icon)?null:(t=new google.maps.Size(n.icon.width,n.icon.height),new google.maps.MarkerImage(n.icon.image,null,null,null,t))},i=function(n){return 0===Object.keys(n).length},n.prototype.onChange=function(n){return this.changeCallback=n},n.prototype.draw=function(n){var t;return t=new google.maps.Map(this.elem,this.settings.map),this.initPolygon(t,this.initMarkers(t,n))},n.prototype.initMarkers=function(n,t){var r,o,i,g;for(o=this.createMarkers(n,t),e(n,s(o)),i=0,g=o.length;g>i;i++)r=o[i],a(r,"dragend",function(n){return function(){return n.changeCallback(u(o))}}(this));return o},n.prototype.createMarkers=function(n,t){var e,r,o,i,a;for(r=p(t),a=[],o=0,i=r.length;i>o;o++)e=r[o],a.push(this.createMarker(n,e));return a},p=function(n){var t,e,r,o;for(o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(c(t));return o},c=function(n){return new google.maps.LatLng(n[0],n[1])},n.prototype.createMarker=function(n,t){return new google.maps.Marker(g(this.settings.marker,{position:t,map:n,draggable:!0,icon:this.icon}))},g=function(){var n,t,e,r,o,i,a;for(r=1<=arguments.length?__slice.call(arguments,0):[],n={},i=0,a=r.length;a>i;i++){e=r[i];for(t in e)o=e[t],n[t]=o}return n},e=function(n,t){var e,r,o,i;for(e=new google.maps.LatLngBounds,o=0,i=t.length;i>o;o++)r=t[o],e.extend(r);return n.fitBounds(e)},a=function(n,t,e){return google.maps.event.addListener(n,t,e)},n.prototype.initPolygon=function(n,t){var e,r,o,i,u;for(r=this.createPolygon(n,t),u=[],o=0,i=t.length;i>o;o++)e=t[o],u.push(a(e,"drag",function(e){return function(){var o;return o=r,r=e.createPolygon(n,t),l(o)}}(this)));return u},s=function(n){var t,e,r,o;for(o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push(t.position);return o},u=function(n){var t,e,r,o;for(o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push([t.position.lat(),t.position.lng()]);return o},l=function(n){return n.setMap(null)},n.prototype.createPolygon=function(n,t){return new google.maps.Polygon(g(this.settings.polygon,{map:n,paths:s(t),draggable:!1,geodesic:!0}))},n}();